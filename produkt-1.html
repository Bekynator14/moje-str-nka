<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Produkt z kolekce — NiPeAlies</title>
  <meta name="description" content="Stránka produktu z kolekce — název, fotografie, cena, velikosti a popis.">
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    /* Thumbs: show all thumbnails in a horizontal strip and give them rounded corners */
    .thumbs{display:flex;gap:10px;align-items:center;overflow:auto;padding:6px 0}
    .thumbs img{width:72px;height:72px;object-fit:cover;border-radius:10px;border:1px solid rgba(0,0,0,0.06);cursor:pointer}
    .thumbs img.dim{opacity:0.45}
    .thumbs img.active{outline:2px solid var(--accent, #0a8);outline-offset:2px}
    /* Redesigned 'E-shop připravujeme' banner */
    .shop-coming{
      display:flex;
      align-items:flex-start; /* align CTA to the first text line */
      gap:16px;
      padding:14px 16px;
      border-radius:14px;
      background:linear-gradient(180deg, rgba(8,120,115,0.03), rgba(255,255,255,0));
      border:1px solid rgba(8,120,115,0.07);
      box-shadow:0 8px 30px rgba(6,90,87,0.04);
      overflow:hidden;
    }
    .shop-coming .sc-left{display:flex;align-items:flex-start;gap:12px;flex:1 1 auto;min-width:0}
    .shop-coming .sc-icon{flex:0 0 auto;width:48px;height:48px;border-radius:10px;background:linear-gradient(180deg,#eaf7f6,#f7fffe);display:flex;align-items:center;justify-content:center;box-shadow:inset 0 -6px 14px rgba(0,0,0,0.02)}
    .shop-coming .sc-icon svg{width:26px;height:26px;fill:#0b5b57}
    .shop-coming .sc-text{min-width:0}
    .shop-coming .sc-text strong{display:block;font-size:1.05rem;color:#0b5b57;margin-bottom:6px}
    .shop-coming .sc-text .muted{color:#2f6b69;font-size:0.98rem;line-height:1.25}
    .shop-coming .sc-cta{flex:0 0 auto;align-self:flex-start;margin-left:8px}
    .sc-cta .btn-primary.link-like{display:inline-block;padding:10px 16px;border-radius:12px;font-weight:700;color:#fff;background:linear-gradient(180deg,#ff92b0,#ff6f95);box-shadow:0 10px 30px rgba(255,111,149,0.14);text-decoration:none;transition:transform .14s ease,box-shadow .14s ease}
    .sc-cta .btn-primary.link-like:hover{transform:translateY(-3px);box-shadow:0 18px 40px rgba(255,111,149,0.18)}
    @media (max-width:768px){
      .shop-coming{flex-direction:column;align-items:stretch;padding:12px}
      .shop-coming .sc-left{order:1}
      .shop-coming .sc-cta{order:2;margin-left:0;margin-top:10px;text-align:left}
      .sc-cta .btn-primary.link-like{width:100%;display:block}
    }
  </style>
</head>
<body class="product-page">
  <!-- header (shared with kolekce.html) -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <div class="logo">
          <img src="design/vazkar.svg" alt="NiPeAlies logo">
          <img src="design/fontr.svg" alt="NiPeAlies font">
        </div>
        <nav class="nav">
          <a href="index.html" class="nav-link">Domů</a>
          <a href="kolekce.html" class="nav-link">Kolekce</a>
          <a href="Onas.html" class="nav-link">O nás</a>
          <a href="kontakt.html" class="nav-link">Kontakt</a>
        </nav>
        <a href="kosik.html" class="cart-button" aria-label="Košík">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M6 6h15l-1.4 7.2a2 2 0 0 1-2 1.6H9.4a2 2 0 0 1-2-1.6L6 6z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="10" cy="20" r="1" fill="currentColor"/>
            <circle cx="18" cy="20" r="1" fill="currentColor"/>
          </svg>
          <span class="cart-badge" aria-hidden="true">0</span>
          <span class="cart-label">Košík</span>
        </a>
      </div>
    </div>
  </header>

  <main>
  <div class="container">
    <nav aria-label="Breadcrumb" style="margin:12px 0;color:var(--muted)">
      <a href="kolekce.html">Kolekce</a> › <span>Jednodílné plavky</span>
    </nav>

    <div class="product">
      <div class="card gallery-card">
        <div class="gallery">
          <figure class="main-img" id="mainImage" aria-hidden="false">
            <img src="img/tropic.jpg" alt="Jednodílné plavky — hlavní foto">
          </figure>

          <div class="thumbs" id="thumbs" role="list">
            <!-- Tropicana variant thumbnails -->
            <img src="img/tropic.jpg" alt="Miniatura Tropicana 1" data-full="img/tropic.jpg" data-color="tropicana" class="active" role="listitem">
            <img src="img/tropic4.jpg" alt="Miniatura Tropicana 5" data-full="img/tropic4.jpg" data-color="tropicana" role="listitem">
            <img src="img/tropic5.jpg" alt="Miniatura Tropicana 6" data-full="img/tropic5.jpg" data-color="tropicana" role="listitem">
            <!-- Měděné fleky variant thumbnails -->
            <img src="img/fleky2.jpg" alt="Miniatura Měděné fleky 3" data-full="img/fleky2.jpg" data-color="medene" role="listitem">
            <img src="img/fleky3.jpg" alt="Miniatura Měděné fleky 4" data-full="img/fleky3.jpg" data-color="medene" role="listitem">
            <img src="img/fleky4.jpg" alt="Miniatura Měděné fleky 5" data-full="img/fleky4.jpg" data-color="medene" role="listitem">
            <img src="img/plavky-beurukavu.webp" alt="Miniatura 2" data-full="img/plavky-beurukavu.webp" data-color="medene" role="listitem">
            <!-- Vodní balet variant thumbnails -->
            <img src="img/balet1.jpeg" alt="Miniatura Vodní balet 2" data-full="img/balet1.jpeg" data-color="vodni" role="listitem">
            <img src="img/balet2.jpg" alt="Miniatura Vodní balet 3" data-full="img/balet2.jpg" data-color="vodni" role="listitem">
            <img src="img/balet3.jpeg" alt="Miniatura Vodní balet 4" data-full="img/balet3.jpeg" data-color="vodni" role="listitem">
            <img src="img/balet4.jpg" alt="Miniatura Vodní balet 5" data-full="img/balet4.jpg" data-color="vodni" role="listitem">
            <img src="img/plavkyb.jpeg" alt="Miniatura 3" data-full="img/plavkyb.jpeg" data-color="vodni" role="listitem">
          </div>
        </div>
      </div>


      <aside class="card product-meta">
        <div>
          <h1 id="productName">Dámské jednodílné plavky — Tropicana</h1>
          <span class="badge">Bestseller</span>
          <div class="muted">Kód produktu: NP-001</div>
        </div>

        <div class="meta-row">
          <div class="price" id="price">3 990 Kč</div>
        </div>
        <div class="muted" style="margin-top:6px">Doprava od 59 Kč • Vrácení do 14 dní</div>

        <div style="margin-top:12px">
          <div class="muted">Barvy</div>
          <div class="colors" id="colors" style="margin:6px 0 10px">
            <button class="color-btn" data-color="tropicana">Tropicana</button>
            <button class="color-btn" data-color="medene">Měděné fleky</button>
            <button class="color-btn" data-color="vodni">Vodní balet</button>
          </div>
          <div class="muted">Velikosti</div>
          <div class="sizes" id="sizes">
            <button class="size" data-size="XS">XS</button>
            <button class="size" data-size="S">S</button>
            <button class="size" data-size="M">M</button>
            <button class="size" data-size="L">L</button>
            <button class="size" data-size="XL">XL</button>
          </div>
        </div>

        <div class="quantity">
          <label for="qty" class="muted">Množství</label>
          <input id="qty" type="number" min="1" value="1">
        </div>

        <div style="margin-top:12px;">
          <div class="shop-coming" role="note" aria-live="polite">
            <div class="sc-left">
              <div class="sc-icon" aria-hidden="true">
                <!-- simple bag icon -->
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M7 7V6a5 5 0 0 1 10 0v1h2v13a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V7h2zm2 0h6V6a3 3 0 0 0-6 0v1z"/></svg>
              </div>
              <div class="sc-text">
                <strong>E-shop připravujeme</strong>
                <div class="muted">Prozatím přijímáme objednávky přes e-mail.</a>.</div>
              </div>
            </div>
            <div class="sc-cta">
              <a class="btn-primary link-like" href="mailto:objednavky@nipealies.cz">Objednat emailem</a>
            </div>
          </div>
          <!-- tlačítko pro oblíbené odstraněno na žádost uživatele -->
        </div>

        <div class="tabs" role="tablist">
          <button class="tab active" data-tab="desc">Popis</button>
          <button class="tab" data-tab="specs">Specifikace</button>
        </div>

        <div class="tab-content" id="desc">
          <h3>Popis produktu</h3>
          <p id="descriptionText">Elegantní jednodílné plavky z řady Tropicana mají moderní vzor, který lichotí postavě. Materiál rychleschnoucí, s UV ochranou. Vhodné pro aktivní použití i relax.</p>
          <ul class="muted specs">
            <li>Materiál: 78% polyamid, 22% elastan</li>
            <li>Údržba: praní na 30°C</li>
            <li>Dostupné barvy: Tropicana, Měděné fleky, Vodní balet</li>
          </ul>
        </div>

        <div class="tab-content" id="specs" style="display:none">
          <h3>Specifikace</h3>
          <ul class="muted specs">
            <li>Hmotnost: 180 g</li>
            <li>Gramáž: 210 g/m²</li>
            <li>Vyrobeno: EU</li>
          </ul>
        </div>
      </aside>
    </div>
  </div>

  <script>
    (function(){
      const thumbs = document.getElementById('thumbs');
      const main = document.querySelector('#mainImage img');
      const cartBadge = document.querySelector('.cart-badge');
      const qtyEl = document.getElementById('qty');

      // build images array from thumbs
      const thumbImgs = Array.from(thumbs.querySelectorAll('img'));
      let images = thumbImgs.map(i => i.dataset.full || i.src);
      let currentIndex = images.indexOf(main.src) >= 0 ? images.indexOf(main.src) : 0;
  // color variants
  const colorsWrap = document.getElementById('colors');
  const colorBtns = colorsWrap ? Array.from(colorsWrap.querySelectorAll('.color-btn')) : [];
  let currentColor = 'tropicana';
  const productNameEl = document.getElementById('productName');
  // store base title (without trailing "— Color") so we can swap the color label
  const baseTitle = productNameEl ? productNameEl.textContent.replace(/\s*—\s*.*/,'').trim() : '';
  const colorNames = { tropicana: 'Tropicana', medene: 'Měděné fleky', vodni: 'Vodní balet' };

          // setColor accepts an optional preferredSrc (string). If provided, set that image as main after switching color.
          function setColor(color, preferredSrc){
            currentColor = color;
            // update active button
            colorBtns.forEach(b=>b.classList.toggle('active', b.dataset.color === color));
            // update product title to reflect chosen color
            if(productNameEl){
              const label = colorNames[color] || (color.charAt(0).toUpperCase() + color.slice(1));
              productNameEl.textContent = (baseTitle ? baseTitle + ' — ' : '') + label;
            }
            // mark non-matching thumbs as dim, but keep all visible
            let visibleThumbs = thumbImgs.filter(i => (i.dataset.color || '') === color);
            thumbImgs.forEach(i => { i.classList.toggle('dim', i.dataset.color !== color); i.style.display = ''; });
            // rebuild images array (prefer matching-color images, fallback to all)
            if(visibleThumbs.length > 0){
              images = visibleThumbs.map(i => i.dataset.full || i.src);
            } else {
              images = thumbImgs.map(i => i.dataset.full || i.src);
              visibleThumbs = [thumbImgs[0]];
            }

            // decide which thumbnail should be active
            let chosenThumb = null;
            if(preferredSrc && typeof preferredSrc === 'string'){
              chosenThumb = thumbImgs.find(i => (i.dataset.full || i.src) === preferredSrc);
            }
            if(!chosenThumb){
              chosenThumb = visibleThumbs[0];
            }

            // set active and main image
            const chosenSrc = chosenThumb ? (chosenThumb.dataset.full || chosenThumb.src) : (images[0] || '');
            thumbImgs.forEach(i=>i.classList.remove('active'));
            if(chosenThumb){ chosenThumb.classList.add('active'); }
            if(chosenSrc){ main.src = chosenSrc; }
            currentIndex = images.indexOf(chosenSrc);
          }

      // wire color buttons
      colorBtns.forEach(b => b.addEventListener('click', ()=> setColor(b.dataset.color)));
      // initialize color view
      setColor(currentColor, true);

      // Thumbnail click -> change main image
      thumbs.addEventListener('click', e => {
        const t = e.target.closest('img');
        if(!t) return;
        const full = t.dataset.full || t.src;
        if(!full) return;
        const thumbColor = t.dataset.color;
        // if thumbnail has a color, switch the product color and prefer this image
        if(thumbColor){
          setColor(thumbColor, full);
          // ensure the corresponding color button is visibly active as well
          const btn = colorBtns.find(b => b.dataset.color === thumbColor);
          if(btn){
            colorBtns.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
          }
        } else {
          // fallback: just set the image
          main.src = full;
          thumbImgs.forEach(i => i.classList.remove('active'));
          t.classList.add('active');
          currentIndex = images.indexOf(full);
        }
      });

      // create lightbox element
      const lightbox = document.createElement('div');
      lightbox.className = 'lightbox';
      lightbox.id = 'lightbox';
  lightbox.innerHTML = `\n        <button class="lightbox-close" aria-label="Zavřít">×</button>\n        <button class="lightbox-prev" aria-label="Předchozí">‹</button>\n        <button class="lightbox-next" aria-label="Další">›</button>\n        <img class="lightbox-img" src="" alt="">`;
      document.body.appendChild(lightbox);

      const lbImg = lightbox.querySelector('.lightbox-img');
      const lbClose = lightbox.querySelector('.lightbox-close');
  const lbPrev = lightbox.querySelector('.lightbox-prev');
  const lbNext = lightbox.querySelector('.lightbox-next');

      function openLightbox(index){
        currentIndex = (index + images.length) % images.length;
        // fade image when switching
        lbImg.style.opacity = 0;
        lbImg.src = images[currentIndex];
        lbImg.onload = () => { lbImg.style.transition = 'opacity 280ms ease'; lbImg.style.opacity = 1; };
        // compensate for scrollbar disappearance to avoid layout shift
        const scrollBarWidth = window.innerWidth - document.documentElement.clientWidth;
        if(scrollBarWidth > 0){ document.body.style.paddingRight = scrollBarWidth + 'px'; }
        lightbox.classList.add('open');
        document.body.style.overflow = 'hidden';
      }
      function closeLightbox(){
        lightbox.classList.remove('open');
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
      }

      // open lightbox from main image
      main.style.cursor = 'zoom-in';
      main.addEventListener('click', ()=> openLightbox(currentIndex));

      // lightbox click to close and nav via keyboard
      lightbox.addEventListener('click', (e)=>{
        if(e.target === lightbox || e.target === lbClose) closeLightbox();
      });
      document.addEventListener('keydown', (e)=>{
        if(!lightbox.classList.contains('open')) return;
        if(e.key === 'Escape') closeLightbox();
        if(e.key === 'ArrowRight') { openLightbox(currentIndex + 1); }
        if(e.key === 'ArrowLeft') { openLightbox(currentIndex - 1); }
      });

      // arrow buttons
      if(lbPrev) lbPrev.addEventListener('click', (ev)=>{ ev.stopPropagation(); openLightbox(currentIndex - 1); });
      if(lbNext) lbNext.addEventListener('click', (ev)=>{ ev.stopPropagation(); openLightbox(currentIndex + 1); });

      // sizes
      const sizesWrap = document.getElementById('sizes');
      let selectedSize = null;
      sizesWrap.addEventListener('click', e => {
        const btn = e.target.closest('.size');
        if(!btn) return;
        sizesWrap.querySelectorAll('.size').forEach(s=>s.classList.remove('selected'));
        btn.classList.add('selected');
        selectedSize = btn.dataset.size;
      });

      // Tabs
      document.querySelectorAll('.tabs .tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.tabs .tab').forEach(t=>t.classList.remove('active'));
          tab.classList.add('active');
          document.querySelectorAll('.tab-content').forEach(c=>c.style.display='none');
          const id = tab.dataset.tab;
          const el = document.getElementById(id);
          if(el) el.style.display = '';
        });
      });

      // Fix tab height to avoid layout shift when switching content of different length
      function fixTabHeights(){
        const tabs = document.querySelectorAll('.tabs .tab');
        const activeTab = document.querySelector('.tabs .tab.active');
        const activeId = activeTab ? activeTab.dataset.tab : null;
        const tabContents = Array.from(document.querySelectorAll('.tab-content'));
        // temporarily show all to measure
        const prev = tabContents.map(c => c.style.display);
        tabContents.forEach(c => c.style.display = '');
        // measure max height
        let max = 0;
        tabContents.forEach(c => { max = Math.max(max, c.offsetHeight); });
        // apply min-height and restore visibility: keep only active visible
        tabContents.forEach(c => {
          c.style.minHeight = max + 'px';
          if(activeId && c.id !== activeId) c.style.display = 'none';
        });
      }

      // debounce helper
      function debounce(fn, wait){
        let t;
        return function(...args){ clearTimeout(t); t = setTimeout(()=>fn.apply(this,args), wait); };
      }

      // run once on init and on resize
      fixTabHeights();
      window.addEventListener('resize', debounce(fixTabHeights, 120));

      // Small toast
      function showToast(msg){
        const t = document.createElement('div');
        t.textContent = msg;
        Object.assign(t.style,{position:'fixed',right:'20px',bottom:'20px',background:'#042a2a',color:'#fff',padding:'12px 16px',borderRadius:'8px',boxShadow:'0 8px 20px rgba(0,0,0,0.2)',zIndex:9999});
        document.body.appendChild(t);
        setTimeout(()=>{ t.style.opacity='0'; t.style.transition='opacity 300ms'; setTimeout(()=>t.remove(),300)},2200);
      }

      // Cart functionality intentionally disabled
      // Per request, the add-to-cart and local cart storage were removed.
      // Users are encouraged to order via email (see banner). The header cart link remains as a visual element only.
    })();
  </script>

  <!-- JSON-LD strukturovaná data (zlepšuje SEO) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "Dámské jednodílné plavky",
  "image": ["img/tropic.jpg","img/tropic1.jpg","img/tropic2.jpg","img/tropic3.jpg","img/tropic4.jpg","img/tropic5.jpg","img/fleky.jpg","img/fleky1.jpg","img/fleky2.jpg","img/fleky3.jpg","img/fleky4.jpg","img/fleky5.jpg","img/balet.jpg","img/balet1.jpg","img/balet2.jpg","img/balet3.jpg","img/balet4.jpg","img/onas2.jpg","img/onas3.jpg","img/plavky-beurukavu.webp","img/plavkyb.jpeg"],
    "description": "Elegantní jednodílné plavky. Rychleschnoucí materiál s UV ochranou.",
    "sku": "NP-001",
    "color": ["Tropicana","Měděné fleky","Vodní balet"],
    "offers": {
      "@type": "Offer",
      "url": "",
      "priceCurrency": "CZK",
      "price": "3990",
      "availability": "https://schema.org/InStock"
    }
  }
  </script>
  
  <!-- shared footer (kopie z kolekce) -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div class="footer-col footer-col--brand">
      <div class="footer-logo">
        <img src="img/vazka.webp" alt="NiPeAlies Dragonfly" class="footer-dragonfly">
        <!-- wordmark image for a nicer footer heading -->
        <img src="img/fontp.svg" alt="NiPeAlies" class="footer-wordmark">
      </div>
        </div>

        <div class="footer-col footer-col--links">
          <h4 class="footer-heading">Rychlé odkazy</h4>
          <nav aria-label="Footer navigation">
            <ul class="footer-nav">
              <li><a href="index.html" class="footer-link">Domů</a></li>
              <li><a href="kolekce.html" class="footer-link">Kolekce</a></li>
              <li><a href="Onas.html" class="footer-link">O nás</a></li>
              <li><a href="kontakt.html" class="footer-link">Kontakt</a></li>
            </ul>
          </nav>
        </div>

        <div class="footer-col footer-col--social">
          <h4 class="footer-heading">Sledujte nás</h4>
          <div class="social-buttons">
            <a href="https://www.instagram.com/nipealies_wetsuit/" target="_blank" class="social-button" aria-label="Instagram">Instagram</a>
            <a href="https://www.facebook.com/Nipealies" target="_blank" class="social-button" aria-label="Facebook">Facebook</a>
          </div>
        </div>

        <div class="footer-col footer-col--contact">
          <h4 class="footer-heading">Adresa</h4>
          <p>
          NiPeAlies s.r.o.<br>
          Všehrdova 194<br>
          500 02 Hradec Králové</p>
        </div>

        <div class="footer-col footer-col--meta">
          <h4 class="footer-heading">Kontaktní údaje</h4>
          <p><strong>Telefon:</strong> <a href="tel:+420720312030" class="footer-link">+420 720 312 030</a></p>
          <p><strong>Email:</strong> <a href="mailto:info@nipealies.cz" class="footer-link">info@nipealies.cz</a></p>
          <p class="footer-meta">IČO: 22555072</p>
        </div>
      </div>

      <div class="footer-bottom">
        <p class="footer-copyright">© 2025 NiPeAlies. Všechna práva vyhrazena.</p>
        <p class="footer-legal">Podmínky používání • Ochrana soukromí</p>
      </div>
    </div>
  </footer>

</main>
</body>
</html>
